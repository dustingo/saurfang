<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
      .layer-title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #34495e; }
      .component-title { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; fill: #2c3e50; }
      .component-text { font-family: Arial, sans-serif; font-size: 10px; fill: #7f8c8d; }
      .layer-bg { fill: #ecf0f1; stroke: #bdc3c7; stroke-width: 2; }
      .component-bg { fill: #ffffff; stroke: #3498db; stroke-width: 1.5; rx: 5; ry: 5; }
      .external-bg { fill: #e8f5e8; stroke: #27ae60; stroke-width: 1.5; rx: 5; ry: 5; }
      .database-bg { fill: #fef9e7; stroke: #f39c12; stroke-width: 1.5; rx: 5; ry: 5; }
      .infrastructure-bg { fill: #ebf3fd; stroke: #3498db; stroke-width: 1.5; rx: 5; ry: 5; }
      .arrow { stroke: #7f8c8d; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .data-flow { stroke: #e74c3c; stroke-width: 2; fill: none; marker-end: url(#arrowhead); stroke-dasharray: 5,5; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7f8c8d" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="800" fill="#f8f9fa" />
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" class="title">Saurfang V2 Fiber - 系统架构图</text>
  
  <!-- Frontend Layer -->
  <rect x="50" y="60" width="1100" height="80" class="layer-bg" />
  <text x="70" y="85" class="layer-title">前端层 (Frontend Layer)</text>
  
  <rect x="80" y="95" width="120" height="35" class="component-bg" />
  <text x="140" y="110" text-anchor="middle" class="component-title">Web界面</text>
  <text x="140" y="122" text-anchor="middle" class="component-text">toofast.html</text>
  
  <rect x="220" y="95" width="120" height="35" class="component-bg" />
  <text x="280" y="110" text-anchor="middle" class="component-title">AMIS Dashboard</text>
  <text x="280" y="122" text-anchor="middle" class="component-text">动态表单</text>
  
  <rect x="360" y="95" width="120" height="35" class="component-bg" />
  <text x="420" y="110" text-anchor="middle" class="component-title">iframe嵌入</text>
  <text x="420" y="122" text-anchor="middle" class="component-text">第三方集成</text>
  
  <rect x="500" y="95" width="120" height="35" class="component-bg" />
  <text x="560" y="110" text-anchor="middle" class="component-title">监控面板</text>
  <text x="560" y="122" text-anchor="middle" class="component-text">实时监控</text>
  
  <!-- API Gateway Layer -->
  <rect x="50" y="160" width="1100" height="100" class="layer-bg" />
  <text x="70" y="185" class="layer-title">API网关层 (API Gateway Layer)</text>
  
  <rect x="80" y="195" width="200" height="55" class="component-bg" />
  <text x="180" y="215" text-anchor="middle" class="component-title">Fiber Web Framework v3</text>
  <text x="180" y="227" text-anchor="middle" class="component-text">高性能Web框架</text>
  <text x="180" y="239" text-anchor="middle" class="component-text">路由管理 + 中间件栈</text>
  
  <rect x="300" y="195" width="100" height="55" class="infrastructure-bg" />
  <text x="350" y="215" text-anchor="middle" class="component-title">中间件</text>
  <text x="350" y="227" text-anchor="middle" class="component-text">CORS/限流</text>
  <text x="350" y="239" text-anchor="middle" class="component-text">认证/日志</text>
  
  <rect x="420" y="195" width="100" height="55" class="infrastructure-bg" />
  <text x="470" y="215" text-anchor="middle" class="component-title">路由注册</text>
  <text x="470" y="227" text-anchor="middle" class="component-text">动态路由</text>
  <text x="470" y="239" text-anchor="middle" class="component-text">RESTful API</text>
  
  <!-- Business Logic Layer -->
  <rect x="50" y="280" width="1100" height="140" class="layer-bg" />
  <text x="70" y="305" class="layer-title">业务逻辑层 (Business Logic Layer)</text>
  
  <rect x="80" y="315" width="120" height="95" class="component-bg" />
  <text x="140" y="335" text-anchor="middle" class="component-title">用户管理</text>
  <text x="140" y="347" text-anchor="middle" class="component-text">UserHandler</text>
  <text x="140" y="359" text-anchor="middle" class="component-text">• 用户认证</text>
  <text x="140" y="371" text-anchor="middle" class="component-text">• 角色权限</text>
  <text x="140" y="383" text-anchor="middle" class="component-text">• 邀请码管理</text>
  <text x="140" y="395" text-anchor="middle" class="component-text">• JWT Token</text>
  
  <rect x="220" y="315" width="120" height="95" class="component-bg" />
  <text x="280" y="335" text-anchor="middle" class="component-title">游戏管理</text>
  <text x="280" y="347" text-anchor="middle" class="component-text">GameHandler</text>
  <text x="280" y="359" text-anchor="middle" class="component-text">• 服务器配置</text>
  <text x="280" y="371" text-anchor="middle" class="component-text">• 频道管理</text>
  <text x="280" y="383" text-anchor="middle" class="component-text">• 逻辑服管理</text>
  <text x="280" y="395" text-anchor="middle" class="component-text">• 游戏组管理</text>
  
  <rect x="360" y="315" width="120" height="95" class="component-bg" />
  <text x="420" y="335" text-anchor="middle" class="component-title">任务管理</text>
  <text x="420" y="347" text-anchor="middle" class="component-text">TaskHandler</text>
  <text x="420" y="359" text-anchor="middle" class="component-text">• 自定义任务</text>
  <text x="420" y="371" text-anchor="middle" class="component-text">• 定时任务</text>
  <text x="420" y="383" text-anchor="middle" class="component-text">• 部署任务</text>
  <text x="420" y="395" text-anchor="middle" class="component-text">• 脚本模板</text>
  
  <rect x="500" y="315" width="120" height="95" class="component-bg" />
  <text x="560" y="335" text-anchor="middle" class="component-title">CMDB管理</text>
  <text x="560" y="347" text-anchor="middle" class="component-text">CMDBHandler</text>
  <text x="560" y="359" text-anchor="middle" class="component-text">• 主机管理</text>
  <text x="560" y="371" text-anchor="middle" class="component-text">• 分组管理</text>
  <text x="560" y="383" text-anchor="middle" class="component-text">• 自动同步</text>
  <text x="560" y="395" text-anchor="middle" class="component-text">• 资产监控</text>
  
  <rect x="640" y="315" width="120" height="95" class="component-bg" />
  <text x="700" y="335" text-anchor="middle" class="component-title">监控面板</text>
  <text x="700" y="347" text-anchor="middle" class="component-text">BoardHandler</text>
  <text x="700" y="359" text-anchor="middle" class="component-text">• 实时监控</text>
  <text x="700" y="371" text-anchor="middle" class="component-text">• 统计图表</text>
  <text x="700" y="383" text-anchor="middle" class="component-text">• 资源统计</text>
  <text x="700" y="395" text-anchor="middle" class="component-text">• 任务状态</text>
  
  <rect x="780" y="315" width="120" height="95" class="component-bg" />
  <text x="840" y="335" text-anchor="middle" class="component-title">通知管理</text>
  <text x="840" y="347" text-anchor="middle" class="component-text">NotifyHandler</text>
  <text x="840" y="359" text-anchor="middle" class="component-text">• 钉钉通知</text>
  <text x="840" y="371" text-anchor="middle" class="component-text">• 邮件通知</text>
  <text x="840" y="383" text-anchor="middle" class="component-text">• 告警规则</text>
  <text x="840" y="395" text-anchor="middle" class="component-text">• 通知渠道</text>
  
  <!-- Data Access Layer -->
  <rect x="50" y="440" width="1100" height="80" class="layer-bg" />
  <text x="70" y="465" class="layer-title">数据访问层 (Data Access Layer)</text>
  
  <rect x="80" y="475" width="150" height="35" class="component-bg" />
  <text x="155" y="490" text-anchor="middle" class="component-title">Repository Pattern</text>
  <text x="155" y="502" text-anchor="middle" class="component-text">GORM + 基础仓库</text>
  
  <rect x="250" y="475" width="150" height="35" class="component-bg" />
  <text x="325" y="490" text-anchor="middle" class="component-title">数据模型</text>
  <text x="325" y="502" text-anchor="middle" class="component-text">User/Task/Game/Host</text>
  
  <rect x="420" y="475" width="150" height="35" class="component-bg" />
  <text x="495" y="490" text-anchor="middle" class="component-title">缓存层</text>
  <text x="495" y="502" text-anchor="middle" class="component-text">Redis缓存管理</text>
  
  <!-- Infrastructure Layer -->
  <rect x="50" y="540" width="1100" height="120" class="layer-bg" />
  <text x="70" y="565" class="layer-title">基础设施层 (Infrastructure Layer)</text>
  
  <rect x="80" y="575" width="120" height="75" class="database-bg" />
  <text x="140" y="595" text-anchor="middle" class="component-title">MySQL</text>
  <text x="140" y="607" text-anchor="middle" class="component-text">主数据库</text>
  <text x="140" y="619" text-anchor="middle" class="component-text">用户/任务/配置</text>
  <text x="140" y="631" text-anchor="middle" class="component-text">GORM ORM</text>
  <text x="140" y="643" text-anchor="middle" class="component-text">连接池管理</text>
  
  <rect x="220" y="575" width="120" height="75" class="database-bg" />
  <text x="280" y="595" text-anchor="middle" class="component-title">Redis</text>
  <text x="280" y="607" text-anchor="middle" class="component-text">缓存数据库</text>
  <text x="280" y="619" text-anchor="middle" class="component-text">会话/缓存</text>
  <text x="280" y="631" text-anchor="middle" class="component-text">任务队列</text>
  <text x="280" y="643" text-anchor="middle" class="component-text">Asynq队列</text>
  
  <rect x="360" y="575" width="120" height="75" class="infrastructure-bg" />
  <text x="420" y="595" text-anchor="middle" class="component-title">Nomad</text>
  <text x="420" y="607" text-anchor="middle" class="component-text">任务调度器</text>
  <text x="420" y="619" text-anchor="middle" class="component-text">分布式调度</text>
  <text x="420" y="631" text-anchor="middle" class="component-text">节点约束</text>
  <text x="420" y="643" text-anchor="middle" class="component-text">资源管理</text>
  
  <rect x="500" y="575" width="120" height="75" class="infrastructure-bg" />
  <text x="560" y="595" text-anchor="middle" class="component-title">Consul</text>
  <text x="560" y="607" text-anchor="middle" class="component-text">服务发现</text>
  <text x="560" y="619" text-anchor="middle" class="component-text">配置管理</text>
  <text x="560" y="631" text-anchor="middle" class="component-text">健康检查</text>
  <text x="560" y="643" text-anchor="middle" class="component-text">KV存储</text>
  
  <rect x="640" y="575" width="120" height="75" class="external-bg" />
  <text x="700" y="595" text-anchor="middle" class="component-title">阿里云</text>
  <text x="700" y="607" text-anchor="middle" class="component-text">ECS实例</text>
  <text x="700" y="619" text-anchor="middle" class="component-text">OSS存储</text>
  <text x="700" y="631" text-anchor="middle" class="component-text">自动同步</text>
  <text x="700" y="643" text-anchor="middle" class="component-text">API集成</text>
  
  <rect x="780" y="575" width="120" height="75" class="external-bg" />
  <text x="840" y="595" text-anchor="middle" class="component-title">华为云</text>
  <text x="840" y="607" text-anchor="middle" class="component-text">ECS实例</text>
  <text x="840" y="619" text-anchor="middle" class="component-text">OBS存储</text>
  <text x="840" y="631" text-anchor="middle" class="component-text">自动同步</text>
  <text x="840" y="643" text-anchor="middle" class="component-text">API集成</text>
  
  <rect x="920" y="575" width="120" height="75" class="external-bg" />
  <text x="980" y="595" text-anchor="middle" class="component-title">通知服务</text>
  <text x="980" y="607" text-anchor="middle" class="component-text">钉钉机器人</text>
  <text x="980" y="619" text-anchor="middle" class="component-text">邮件服务</text>
  <text x="980" y="631" text-anchor="middle" class="component-text">NTFY推送</text>
  <text x="980" y="643" text-anchor="middle" class="component-text">多渠道通知</text>
  
  <!-- Data Flow Arrows -->
  <line x1="300" y1="140" x2="300" y2="160" class="arrow" />
  <line x1="180" y1="260" x2="180" y2="280" class="arrow" />
  <line x1="350" y1="420" x2="350" y2="440" class="arrow" />
  <line x1="350" y1="520" x2="350" y2="540" class="arrow" />
  
  <!-- Cross-layer connections -->
  <line x1="420" y1="410" x2="420" y2="575" class="data-flow" />
  <line x1="560" y1="410" x2="560" y2="575" class="data-flow" />
  <line x1="700" y1="410" x2="700" y2="575" class="data-flow" />
  <line x1="840" y1="410" x2="980" y2="575" class="data-flow" />
  
  <!-- Legend -->
  <rect x="50" y="680" width="1100" height="100" class="layer-bg" />
  <text x="70" y="705" class="layer-title">图例说明</text>
  
  <rect x="80" y="715" width="80" height="20" class="component-bg" />
  <text x="120" y="728" text-anchor="middle" class="component-text">应用组件</text>
  
  <rect x="180" y="715" width="80" height="20" class="infrastructure-bg" />
  <text x="220" y="728" text-anchor="middle" class="component-text">基础设施</text>
  
  <rect x="280" y="715" width="80" height="20" class="database-bg" />
  <text x="320" y="728" text-anchor="middle" class="component-text">数据存储</text>
  
  <rect x="380" y="715" width="80" height="20" class="external-bg" />
  <text x="420" y="728" text-anchor="middle" class="component-text">外部服务</text>
  
  <line x1="500" y1="725" x2="550" y2="725" class="arrow" />
  <text x="580" y="728" class="component-text">请求流向</text>
  
  <line x1="650" y1="725" x2="700" y2="725" class="data-flow" />
  <text x="730" y="728" class="component-text">数据流向</text>
  
  <!-- Architecture Features -->
  <text x="80" y="755" class="component-text">架构特点：</text>
  <text x="80" y="770" class="component-text">• 分层架构设计，职责清晰分离</text>
  <text x="300" y="770" class="component-text">• 基于Fiber v3的高性能Web框架</text>
  <text x="520" y="770" class="component-text">• 集成HashiCorp生态(Nomad/Consul)</text>
  <text x="750" y="770" class="component-text">• 支持多云平台资源管理</text>
</svg>